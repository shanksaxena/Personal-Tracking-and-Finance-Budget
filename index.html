<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Creative Finance Tracker</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="static/css/style.css" />
  <!-- Finance related icon library (Bootstrap Icons) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" />
  <!-- Custom font and additional creative CSS -->
  <link href="https://fonts.googleapis.com/css2?family=Sansita+Swashed:wght@500;700&display=swap" rel="stylesheet" />
</head>

<body>
  <!-- Navigation Bar with Dark Mode Toggle, Language Selector and Settings Link -->
  <nav class="navbar navbar-expand-lg navbar-light bg-light shadow-sm">
    <div class="container">
      <a class="navbar-brand" href="index.html">
        <i class="bi bi-cash-stack"></i> Finance Tracker
      </a>
      <div class="d-flex align-items-center">
        <!-- Language switcher -->
        <select id="languageSelect" class="form-select form-select-sm me-3" title="Select Language">
          <option value="en" selected>English</option>
          <option value="hi">हिन्दी</option>
        </select>
        <div class="form-check form-switch me-3">
          <input class="form-check-input" type="checkbox" id="darkModeToggle" />
          <label class="form-check-label" for="darkModeToggle" title="Toggle Dark Mode">Dark Mode</label>
        </div>
        <a href="settings.html" class="btn btn-outline-secondary" title="Customize Categories, Currency, and Themes">
          <i class="bi bi-gear-fill"></i> Settings
        </a>
      </div>
    </div>
  </nav>

  <!-- Banner Section -->
  <div class="container my-4">
    <div class="text-center mb-4">
      <h1 id="siteTitle">Creative Finance Tracker</h1>
      <p class="tagline" id="siteTagline">Empower Your Wealth, One Transaction at a Time.</p>
    </div>

    <!-- Alert for Success / Error messages -->
    <div id="alertMessage" class="alert d-none" role="alert"></div>

    <!-- Finance Banner Image -->
    <div class="mb-4 text-center">
      <img src="https://placehold.co/1200x300?text=Your+Financial+Journey" alt="Finance Banner"
        class="img-fluid rounded shadow-sm" />
    </div>

    <div class="row g-4">
      <!-- Transaction Form -->
      <div class="col-lg-6">
        <div class="card">
          <h3 class="mb-4"><i class="bi bi-plus-circle"></i> <span id="addTransactionText">Add Transaction</span></h3>
          <form id="transactionForm" novalidate class="space-y-4">
            <div class="mb-3">
              <label for="amount" class="form-label" id="amountLabel">Amount (₹)</label>
              <div class="input-group">
                <span class="input-group-text">₹</span>
                <input type="number" step="0.01" class="form-control form-control-lg" id="amount"
                  placeholder="0.00" required data-tooltip="Enter transaction amount" />
              </div>
              <div class="invalid-feedback" id="amountError">Please enter a valid amount.</div>
            </div>

            <div class="mb-3">
              <label for="category" class="form-label" id="categoryLabel">Category</label>
              <select class="form-select form-select-lg" id="category" required data-tooltip="Select transaction category">
                <option value="">Choose category...</option>
                <option value="Food">Food</option>
                <option value="Transport">Transport</option>
                <option value="Entertainment">Entertainment</option>
                <option value="Bills">Bills</option>
                <option value="Others">Others</option>
                <option value="Custom">Add Custom Category...</option>
              </select>
              <div class="invalid-feedback" id="categoryError">Please select a category.</div>
            </div>

            <!-- Custom Category Input (hidden by default) -->
            <div class="mb-3 d-none" id="customCategoryContainer">
              <label for="customCategory" class="form-label" id="customCategoryLabel">Custom Category</label>
              <input type="text" class="form-control form-control-lg" id="customCategory"
                placeholder="Enter custom category" data-tooltip="Type your custom category" />
              <div class="invalid-feedback" id="customCategoryError">Please enter a custom category.</div>
            </div>

            <button type="submit" class="btn btn-primary btn-lg w-100">
              <i class="bi bi-save2"></i> <span id="submitButtonText">Add Transaction</span>
            </button>
          </form>
        </div>
      </div>

      <!-- Transaction List and Expense Chart -->
      <div class="col-lg-6">
        <div class="row">
          <div class="col-md-6">
            <h3 class="mb-4"><i class="bi bi-clock-history"></i> <span
                id="recentTransactionsText">Recent Transactions</span>
            </h3>
            <div id="transactionList" class="space-y-3">
              <!-- Dynamic transaction cards will be rendered here -->
            </div>
          </div>
          <div class="col-md-6">
            <div class="card p-3">
              <h3 class="mb-3"><i class="bi bi-pie-chart-fill"></i> <span
                  id="expenseChartTitle">Expense Chart</span></h3>
              <canvas id="expenseChart"></canvas>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- External Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="static/js/main.js"></script>
  <script>
    // Dark Mode: Ensure working dark mode toggle
    (function () {
      const darkModeToggle = document.getElementById('darkModeToggle');
      // Get saved theme from localStorage, default to light if not set.
      const savedTheme = localStorage.getItem('theme') || 'light';
      document.documentElement.setAttribute('data-theme', savedTheme);
      darkModeToggle.checked = (savedTheme === 'dark');

      darkModeToggle.addEventListener('change', function () {
        const theme = this.checked ? 'dark' : 'light';
        document.documentElement.setAttribute('data-theme', theme);
        localStorage.setItem('theme', theme);
      });
    })();

    // Custom Category: Show/hide custom input field based on selection.
    (function () {
      const categorySelect = document.getElementById('category');
      const customCategoryContainer = document.getElementById('customCategoryContainer');
      categorySelect.addEventListener('change', function () {
        if (this.value === 'Custom') {
          customCategoryContainer.classList.remove('d-none');
          document.getElementById('customCategory').setAttribute('required', 'required');
        } else {
          customCategoryContainer.classList.add('d-none');
          document.getElementById('customCategory').removeAttribute('required');
        }
      });
    })();

    // Language Switcher: Basic language toggling (English/Hindi) for demonstration.
    (function () {
      const languageSelect = document.getElementById('languageSelect');
      languageSelect.addEventListener('change', function () {
        const lang = this.value;
        if (lang === 'hi') {
          document.getElementById('siteTitle').textContent = 'क्रिएटिव फ़ाइनेंस ट्रैकर';
          document.getElementById('siteTagline').textContent = 'हर लेन-देन के साथ अपनी संपत्ति सशक्त बनाएं।';
          document.getElementById('addTransactionText').textContent = 'लेन-देन जोड़ें';
          document.getElementById('amountLabel').textContent = 'राशि (₹)';
          document.getElementById('categoryLabel').textContent = 'श्रेणी';
          document.getElementById('customCategoryLabel').textContent = 'कस्टम श्रेणी';
          document.getElementById('submitButtonText').textContent = 'लेन-देन सहेजें';
          document.getElementById('recentTransactionsText').textContent = 'हाल के लेन-देन';
          document.getElementById('expenseChartTitle').textContent = 'खर्च चार्ट';
        } else {
          document.getElementById('siteTitle').textContent = 'Creative Finance Tracker';
          document.getElementById('siteTagline').textContent = 'Empower Your Wealth, One Transaction at a Time.';
          document.getElementById('addTransactionText').textContent = 'Add Transaction';
          document.getElementById('amountLabel').textContent = 'Amount (₹)';
          document.getElementById('categoryLabel').textContent = 'Category';
          document.getElementById('customCategoryLabel').textContent = 'Custom Category';
          document.getElementById('submitButtonText').textContent = 'Add Transaction';
          document.getElementById('recentTransactionsText').textContent = 'Recent Transactions';
          document.getElementById('expenseChartTitle').textContent = 'खर्च चार्ट';
        }
      });
    })();
  </script>
</body>

</html>
